<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>API Explorer · Net Observation Project</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;700&display=swap" rel="stylesheet">
  <script defer src="https://cdn.jsdelivr.net/npm/chart.js@4.4.6/dist/chart.umd.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/d3@7"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/topojson-client@3"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/@auth0/auth0-spa-js@2.1.3/dist/auth0-spa-js.production.js"></script>
  <script defer src="script.js"></script>
</head>
<body data-page="api">
  <aside class="sidebar">
    <div class="logo-sigil logo-sigil--sidebar" role="img" aria-label="Net Observation Project logo"></div>
    <div class="theme-toggle" data-role="theme-toggle" role="button" tabindex="0">
      <span>Theme:</span>
      <strong data-label>AUTO</strong>
    </div>
    <nav>
      <a href="index.html">Overview</a>
      <a href="dashboard.html">Dashboard</a>
      <a href="docs.html">Docs</a>
      <a href="api.html">API</a>
      <a href="data.html">Data Lab</a>
      <a href="versions.html">Versions</a>
    </nav>
  </aside>
  <button class="sidebar-toggle" aria-label="Toggle navigation" aria-expanded="true">&#x2715;</button>

  <header>
    <div style="display:flex;align-items:center;gap:1rem;">
      <div class="logo-sigil logo-sigil--header" role="img" aria-label="Net Observation Project logo"></div>
      <div>
        <h1 style="margin:0;font-size:1.2rem;letter-spacing:0.08em;">API Explorer</h1>
        <p style="margin:0;color:var(--text-muted);font-size:0.85rem;">Inspect backend payloads in real-time</p>
      </div>
    </div>
    <nav class="primary-nav">
      <a href="index.html">Overview</a>
      <a href="dashboard.html">Dashboard</a>
      <a href="docs.html">Docs</a>
      <a href="api.html">API</a>
      <a href="data.html">Data Lab</a>
      <a href="versions.html">Versions</a>
      <span class="badge" data-auth-status>Anonymous</span>
      <button data-action="login" class="badge" style="cursor:pointer; background:rgba(0,255,255,0.12);">Login</button>
      <button data-action="logout" class="badge hidden" style="cursor:pointer; background:rgba(255,0,255,0.12);">Logout</button>
    </nav>
  </header>

  <main>
    <section class="card">
      <h2>Endpoint</h2>
      <h3>/api/censys-summary</h3>
      <p>This endpoint normalizes Censys Search v2 metrics into a single payload consumed by the dashboard. It refreshes automatically every minute but you can also execute manual requests via the terminal below.</p>
      <pre style="background:rgba(0,0,0,0.35);padding:1rem;border-radius:12px;overflow:auto;">GET /api/censys-summary
Accept: application/json
Authorization: Basic &lt;CENSYS_API_ID:CENSYS_API_SECRET&gt;</pre>
    </section>

    <section class="card">
      <h2>Live Payload</h2>
      <h3>Auto-refresh output</h3>
      <pre id="apiPayload" style="background:rgba(0,0,0,0.4);padding:1rem;border-radius:12px;overflow:auto;min-height:180px;">Awaiting response…</pre>
    </section>

    <section class="card">
      <h2>Command Runner</h2>
      <h3>Terminal interface</h3>
      <div class="terminal">
        <div class="terminal-output"></div>
        <div class="terminal-input">
          <input type="text" placeholder="Type help for commands" />
          <button type="button">Run</button>
        </div>
      </div>
    </section>
  </main>

  <button class="settings-toggle">&#9881;</button>
  <form class="settings-panel hidden">
    <h4>System Settings</h4>
    <label for="backendUrl">Backend Endpoint</label>
    <input id="backendUrl" name="backendUrl" type="url" placeholder="https://example.com/api/censys-summary" />
    <label for="auth0Domain">Auth0 Domain</label>
    <input id="auth0Domain" name="auth0Domain" type="text" placeholder="tenant.eu.auth0.com" />
    <label for="auth0ClientId">Auth0 Client ID</label>
    <input id="auth0ClientId" name="auth0ClientId" type="text" placeholder="abc123XYZ" />
    <label for="themeMode">Theme Mode</label>
    <select id="themeMode" name="themeMode">
      <option value="auto">Auto</option>
      <option value="dark">Dark</option>
      <option value="light">Light</option>
    </select>
    <button type="submit">Save Settings</button>
  </form>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const payload = document.getElementById('apiPayload');
      const render = () => {
        const data = window.__latestCensys || null;
        if (!payload) return;
        if (!data) {
          payload.textContent = 'Awaiting response…';
          return;
        }
        payload.textContent = JSON.stringify(data, null, 2);
      };
      render();
      setInterval(render, 2000);
    });
  </script>
</body>
</html>
