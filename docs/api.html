<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>API Â· Net Observation Project</title>
  <link rel="stylesheet" href="style.css">
  <script src="script.js" defer></script>
</head>
<body class="dark">
<header class="neon-banner small">
  <img src="logo.png" class="logo" alt="Logo">
  <div class="banner-text">
    <h1>API Reference</h1>
    <p class="subtitle">How the UI talks to your backend proxy</p>
  </div>
</header>
<div class="layout">
  <aside class="sidebar collapsed">
    <button class="collapse-btn" onclick="toggleSidebar()">â˜°</button>
    <nav class="main-nav">
      <a href="index.html">Home</a>
      <a href="docs.html">Docs</a>
      <a href="api.html" class="active">API</a>
      <a href="dashboard.html">Dashboard</a>
      <a href="data.html">Data Visualizer</a>
      <a href="versions.html">Versions</a>
    </nav>
    <hr>
    <nav class="version-nav">
      <div class="nav-header">Docs Versions</div>
      <a href="#">v1.0 Â· Public</a>
      <a href="#" class="disabled">v1.1 Â· WIP</a>
      <a href="#" class="disabled">v2.0 Â· Future</a>
    </nav>
    <hr>
    <button class="theme-btn" onclick="toggleTheme()">Toggle Theme</button>
    <button class="settings-btn" onclick="toggleSettings()">Settings</button>
  </aside>
  <main>
    <section>
      <h2>Backend Design</h2>
      <p>
        The front-end never talks directly to Censys. Instead, it expects a secure backend proxy that hides
        your Censys credentials and returns safe, aggregated JSON for the dashboard.
      </p>
      <p>Example response from your backend:</p>
      <pre><code>{
  "total_hosts": 123456789,
  "total_services": 987654321,
  "last_sync": "2025-11-14T10:00:00Z",
  "countries": {
    "US": 120,
    "DE": 80,
    "NL": 42,
    "AU": 35,
    "GB": 60,
    "FR": 55
  },
  "services": {
    "http": 80,
    "https": 95,
    "ssh": 40
  }
}</code></pre>
    </section>

    <section>
      <h2>Dynamic Endpoint</h2>
      <p>
        The endpoint URL and refresh interval can be changed in the <strong>Settings</strong> panel.
        They are stored in <code>localStorage</code> under <code>netobs_config</code>.
      </p>
    </section>

    <section>
      <h2>Cloudflare Worker / Express Examples</h2>
      <p>You can implement the backend with Cloudflare Workers, Express, or any serverless platform.</p>
      <p>(You can ask ChatGPT to generate those as separate files if you want.)</p>
    </section>
  </main>
</div>

<div id="settingsPanel" class="settings-panel hidden">
  <div class="settings-inner">
    <h2>Settings / Config</h2>
    <p>Shared across all pages via localStorage.</p>
    <label>Backend summary endpoint:<br>
      <input id="cfgEndpoint" placeholder="/api/censys-summary">
    </label>
    <label>Refresh interval (seconds):<br>
      <input id="cfgInterval" type="number" min="5" max="3600" step="5">
    </label>
    <h3>Auth0</h3>
    <label>Auth0 Domain:<br>
      <input id="cfgAuthDomain" placeholder="YOUR-TENANT.eu.auth0.com">
    </label>
    <label>Auth0 Client ID:<br>
      <input id="cfgAuthClient" placeholder="YOUR_CLIENT_ID">
    </label>
    <button id="cfgSaveBtn">Save Settings</button>
    <button id="cfgCloseBtn" class="ghost-btn" onclick="toggleSettings()">Close</button>
  </div>
</div>

<footer>
  <p>API Â· Net Observation Project ðŸ”Œ</p>
</footer>
</body>
</html>
